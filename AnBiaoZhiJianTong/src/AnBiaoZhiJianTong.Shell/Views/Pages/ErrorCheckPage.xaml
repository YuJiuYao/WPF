<!--错误项显示页面-->
<UserControl x:Class="AnBiaoZhiJianTong.Shell.Views.ErrorCheckPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:AnBiaoZhiJianTong.Shell.Views"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="Transparent" BorderThickness="0,0,0,1">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <!-- 鼠标悬停时，背景变为蓝色，下划线出现 -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="DeepSkyBlue" />
                                <Setter Property="Foreground" Value="White" />
                                <Setter TargetName="border" Property="BorderBrush" Value="DeepSkyBlue" />
                            </Trigger>
                            <!-- 按下时，背景变为更深的蓝色 -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="DeepSkyBlue" />
                                <Setter Property="Foreground" Value="White" />
                                <Setter TargetName="border" Property="BorderBrush" Value="DeepSkyBlue" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <Border BorderThickness="1" BorderBrush="Gray" Background="White" >
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="8*"/>
                <RowDefinition Height="20*"/>
                <RowDefinition Height="70*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Grid.Row="0" BorderBrush="Gray"  
                BorderThickness="1"
                CornerRadius="5"
                >
                <Grid  Grid.Column="0">
                    <TextBlock FontSize="14" FontWeight="SemiBold" Foreground="DodgerBlue" >
                        <Run Text="|" Foreground="DodgerBlue"/>  <!-- 注意这里的空格 -->
                        <Run Text="检查项内容" />
                    </TextBlock>
                </Grid>
            </Border>
            <Border Grid.Row="1" BorderBrush="Gray"  
                BorderThickness="1"
                CornerRadius="5"
                >
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <!-- 采用更加灵活的列宽比例 -->
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <!-- 让数字区域更高以突出重点 -->
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="40"/>
                    </Grid.RowDefinitions>
                    <!-- ===== 第一行：数字显示（强化视觉焦点） ===== -->
                    <!-- 错误统计（红色） -->
                    <Border Grid.Row="0" Grid.Column="0"
                        CornerRadius="8" 
                        Padding="2"
                        Margin="2">
                        <TextBlock Text="{Binding TotalErrorCount}" 
                           Foreground="Red" 
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
                    </Border>
                    <!-- 人工检查（橙色） -->
                    <Border Grid.Row="0" Grid.Column="1"  
                            CornerRadius="8"
                            Padding="2"
                            Margin="2">
                        <TextBlock Text="{Binding TotalManualCount}" 
                               Foreground="Orange" 
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                    </Border>
                    <!-- 已修复（绿色）-->
                    <Border Grid.Row="0" Grid.Column="2" 
                            CornerRadius="8"
                            Padding="2"
                            Margin="2">
                        <TextBlock Text="{Binding TotalFixCount}" 
                               Foreground="Green" 
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                    </Border>
                    <!-- ===== 第二行：标签说明（弱化视觉） ===== -->
                    <TextBlock Grid.Row="1" Grid.Column="0" 
                               Text="错误" 
                               Style="{StaticResource TextBlockDefaultDanger}"
                               FontSize="12"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                    <TextBlock Grid.Row="1" Grid.Column="1" 
                               Text="人工检查" 
                                Style="{StaticResource TextBlockDefaultWarning}"
                               FontSize="12"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                    <TextBlock Grid.Row="1" Grid.Column="2" 
                               Text="已修复" 
                               Style="{StaticResource TextBlockDefaultSuccess}"
                               FontSize="12"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Grid>
            </Border>
            <Border Grid.Row="2" BorderBrush="Gray"  
                BorderThickness="1"
                CornerRadius="5"
                >
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="19*"/>
                        <ColumnDefinition Width="31*"/>
                    </Grid.ColumnDefinitions>
                    <TreeView x:Name="ErrorTreeView" ItemsSource="{Binding ErrorRootItems}"  VirtualizingStackPanel.IsVirtualizing="True" Grid.ColumnSpan="2" SelectedItemChanged="TreeView_SelectedItemChanged" Loaded="TreeView_Loaded">
                        <TreeView.Style>
                            <Style TargetType="TreeView">
                                <!-- 去除 TreeView 的默认边框 -->
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="TreeView">
                                            <Border BorderThickness="0" BorderBrush="Transparent">
                                                <ItemsPresenter />
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TreeView.Style>
                        <TreeView.ItemTemplate>
                            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Title}" Margin="2,0" />
                                    <TextBlock Text="{Binding TotalCount}" Margin="20,0" Foreground="Red" FontWeight="Bold"/>
                                </StackPanel>
                            </HierarchicalDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                    <!--<TabControl>
                    <TabItem Header="错误项">
                        <TreeView x:Name="ErrorTreeView" ItemsSource="{Binding ErrorRootItems}"  VirtualizingStackPanel.IsVirtualizing="True">
                            <TreeView.Style>
                                <Style TargetType="TreeView">
                                    -->
                    <!-- 去除 TreeView 的默认边框 -->
                    <!--
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="TreeView">
                                                <Border BorderThickness="0" BorderBrush="Transparent">
                                                    <ItemsPresenter />
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </TreeView.Style>
                            <TreeView.ItemTemplate>
                                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox IsChecked="{Binding IsChecked}" Margin="5,0" />
                                        <TextBlock Text="{Binding Number}" Margin="5,0" />
                                        <TextBlock Text="{Binding Title}" Margin="5,0" />
                                    </StackPanel>
                                </HierarchicalDataTemplate>
                            </TreeView.ItemTemplate>
                        </TreeView>
                    </TabItem>
                    <TabItem Header="全部项">
                        <TreeView x:Name="AllTreeView" ItemsSource="{Binding AllRootItems}" VirtualizingStackPanel.IsVirtualizing="True" >
                            <TreeView.Style>
                                <Style TargetType="TreeView">
                                    -->
                    <!-- 去除 TreeView 的默认边框 -->
                    <!--
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="TreeView">
                                                <Border BorderThickness="0" BorderBrush="Transparent">
                                                    <ItemsPresenter />
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </TreeView.Style>
                            <TreeView.ItemTemplate>
                                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox IsChecked="{Binding IsChecked}" Margin="5,0" />
                                        <TextBlock Text="{Binding Number}" Margin="5,0" />
                                        <TextBlock Text="{Binding Title}" Margin="5,0" />
                                    </StackPanel>
                                </HierarchicalDataTemplate>
                            </TreeView.ItemTemplate>
                        </TreeView>
                    </TabItem>
                </TabControl>-->
                </Grid>
            </Border>
            <Grid x:Name="MiddlePanel"  Grid.Column="1" Grid.RowSpan="3">
                <ContentControl x:Name="ErrorShowPage"  />
            </Grid>
        </Grid>
    </Border>
</UserControl>
