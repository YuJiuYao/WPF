<!--错误显示页面-->
<UserControl x:Class="AnBiaoZhiJianTong.Shell.Views.ErrorShowPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:AnBiaoZhiJianTong.Shell.Views"
             xmlns:converters="clr-namespace:AnBiaoZhiJianTong.Shell.ShellUtilities.Converters"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <Style x:Key="CenteredCellStyle" TargetType="DataGridCell">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="FontFamily" Value="楷书"/>
            <Setter Property="Background" Value="AliceBlue"/>
        </Style>
        <converters:RowIndexConverter x:Key="RowIndexConverter"/>
    </UserControl.Resources>
    <Border BorderBrush="Gray"  
                BorderThickness="1"
                CornerRadius="5"
                Background="White">
        <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0">
                <TextBlock FontSize="14" FontWeight="DemiBold" Foreground="DodgerBlue">
                    <Run Text="|" Foreground="DodgerBlue"/>
                    <Run Text="检查详情" /><!-- 注意这里的空格 -->
            </TextBlock>
        </StackPanel>
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="10,0,5,0">
                <TextBlock Text="错误:" 
                            Margin="0,0,5,0"                             
                            Style="{StaticResource TextBlockDefaultDanger}"
                            FontSize="12"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <TextBlock Text="{Binding ErrorCount}" Margin="0,0,5,0" Foreground="Red" FontWeight="Bold" HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <TextBlock Text="人工检查:" 
                            Margin="0,0,5,0" 
                            Style="{StaticResource TextBlockDefaultWarning}"
                            FontSize="12"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <TextBlock Text="{Binding MannalCont}" Margin="0,0,5,0" Foreground="Orange" FontWeight="Bold" HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <TextBlock Text="已修复" 
                            Margin="0,0,5,0" 
                            Style="{StaticResource TextBlockDefaultSuccess}"
                            FontSize="12"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <TextBlock Text="{Binding FixCount}" Margin="0,0,5,0" Foreground="Green" FontWeight="Bold" HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
        </StackPanel>
        <!-- 数据表格 -->
        <DataGrid x:Name="ErrorDataGrid"
                  AutoGenerateColumns="False"
                  ItemsSource="{Binding AssociatedDataItems}"
                  BorderBrush="Black"
                  BorderThickness="1"
                  Background="White"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  Grid.Row="2"
                  Margin="15,15,15,26">

            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                        <Setter Property="ContentTemplate">
                            <Setter.Value>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" HorizontalAlignment="Center" />
                                </DataTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
            </DataGrid.ColumnHeaderStyle>

            <!-- 绑定到 MyTreeNodeData 类型的属性 -->
            <DataGrid.Columns>
                <!-- 序号列（动态生成） -->
                <!--<DataGridTextColumn Header="序号" Width="5*">
                    <DataGridTextColumn.Binding>
                        <Binding RelativeSource="{RelativeSource AncestorType=DataGridRow}" 
                                 Converter="{StaticResource RowIndexConverter}"/>
                    </DataGridTextColumn.Binding>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                            <Setter Property="VerticalContentAlignment" Value="Center" />
                            <Setter Property="Background" Value="LightGray"/>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>-->

                <!-- 页码 -->
                <DataGridTextColumn Header="页码" Width="10*"
                                Binding="{Binding ErrorPageNumber}">
                    <DataGridTextColumn.CellStyle>
                        <StaticResource ResourceKey="CenteredCellStyle" />
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                
                    <!-- 错误位置 -->
                <DataGridTextColumn Header="错误位置(关键字)" Width="10*"
                                    Binding="{Binding ErrorParagraph}" >
                    <DataGridTextColumn.CellStyle>
                        <StaticResource ResourceKey="CenteredCellStyle" />
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>

                <!-- 错误详情 -->
                <DataGridTextColumn Header="错误详情" Width="10*"
                                    Binding="{Binding ErrorSummary}">
                    <DataGridTextColumn.CellStyle>
                        <StaticResource ResourceKey="CenteredCellStyle" />
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>


                <!-- 检查点 -->
                <DataGridTextColumn Header="检查点" Width="10*"
                                    Binding="{Binding CheckPointName}">
                    <DataGridTextColumn.CellStyle>
                        <StaticResource ResourceKey="CenteredCellStyle" />
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>

                <!-- 检查规则要求 -->
                <DataGridTextColumn Header="检查规则要求" Width="10*"
                                    Binding="{Binding CheckPointRequirement}">
                        <DataGridTextColumn.CellStyle>
                            <StaticResource ResourceKey="CenteredCellStyle" />
                        </DataGridTextColumn.CellStyle>
                    </DataGridTextColumn>
                <!-- 错误类型 -->
                    <DataGridTextColumn Header="错误类型" Width="10*"
                                    Binding="{Binding CheckResult}">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="DataGridCell" BasedOn="{StaticResource CenteredCellStyle}">
                                <Setter Property="Foreground"
                                        Value="{Binding TyprColor}" />
                                <Setter Property="Background"
                                        Value="Transparent" />
                            </Style>
                        </DataGridTextColumn.CellStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
        </DataGrid>
    </Grid>
    </Border>
</UserControl>
